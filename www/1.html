<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
</head>
<body>
<script type="text/javascript">
	
Node

模板引擎  consolidate  模板适配

const  consolidate = require('consolidate')
server.set('view engine', 'html')
server.set('views', './www')
server.engine('html',consolidate.ejs)
server.get('/index',function(req.res){
	res.render('指定模板文件'，数据)
	res.render('2.ejs',{name:'pps'})
})


路由的配置
coute--把不同的目录，对应到不同的模块

const express = require('express')

const server = express()
//创建路由
cosnt Routers = express.Route();
Routers.get('./html1',function(req,res){  // localhost:8888/user/html1.html
	res.send('html1')
})

Routers.get('./html2',function(req,res){ // localhost:8888/user/html2.html
	res.send('html2')
})

Server.use('/user/', Routers )  //顺序自己定

Server.listen(8888)

sql

链接数据库
cosnt mysql = require('mysql')
const sq = mysql.createPool(host, port, user, password) //连接池   多个连接使用	

const sq = mysql.createConnecton(host, port, user, password)	// 单独连接
sq.query(SQL语句, function(res){
	// to do
})



sql语句

增 -INSERT
INSERT INTO 表名称 VALUES （值）

删-DELETE
改-UPLATE
查-SELECT

子句

WHERE age(字段名称)<18
WHERE age(字段名称)>18 AND sex=1 
WHERE age(字段名称)>18 OR sex=1


ORDER 排序

ORDER BY age(字段名称) ASC(升序) 
ORDER BY age(字段名称) DESC(降序)
ORDER BY price ASC,length DESC  (多个排序条件逗号隔开)

GROP 合并相同项 ->（聚类）
统计每个班的人数

COUNT  计数用

`SELECT class COUNT(class) FROM student_table GROUP BY class`


LIMIT   限制输出  (分页应用比较多)


字句之间的顺序

WHERE GROUP ORDER BY LIMIT 
WHERE（筛选）
GROUP （合并）
ORDER BY（排序）
LIMIT （限制）




连接到数据库

const db = mysql.createPool() // 连接池

eg：
server.get('/',(req, res, next)=>{
	db.query(`SELECT * FROM banner_table`,(err, data)=>{
		if(err){
			res.status(500).send(datebane error).end()
		}else{
			// res.render('index.ejs',{bannerData:data})
			// 通过ejs来进行渲染,单独请求时后可以直接渲染，若多个可以通过next()传递到下一步
			res.bannerData = data
			next();
		}
	})
})

server.get('/',(req, res, next)=>{
	db.query(`SELECT title, ID FROM article_table`,(err, data)=>{
		if(err){
			res.status(500).send(datebane error).end()
		}else{
			res.articles = data
			next();
		}
	})
})

//链式操作
server.get('/',(req, res, next)=>{
	db.query(`SELECT `title` FROM article_table`,(err, data)=>{
		//在最后进行渲染
		res.render('index.ejs',{banners:res.bannerData,articles:res.articles})
	})
})



/**
 * express  实现
 */

const express =  require('express')
const static =  require('express-static')
const mysql  = require('mysql')
const bodyParser = require('body-parser')
const expressRoute =  require('express-route')
const cookieSession =  require('cookie-session')
const cookieParser =  require('cookie-parser')
const multer = require('multer')
const consolidate = require('consolidate')

const server = express();
server.listen(8080);

// 获取数据 
		
// cookie session
	server.use(cookieParser())
	(function(){
		var keys = []
		for(var i=0;i<999;i++){
			arr[i] = 'a_'+Math.random()
		}
		server.use(cookieSession({
			name: 'sees_id',
			keys:keys,
			maxAge: 20*60*1000
		}))
	})()
	
// 模板引擎
	server.engine('html', cosolidate.ejs)
	server.set('views','template')
	server.set('view engine', 'html')
// route
	
// default html












</script>
</body>
</html>
