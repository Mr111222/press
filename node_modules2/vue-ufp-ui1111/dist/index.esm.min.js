import isArray from"lodash/isArray";import isFunction from"lodash/isFunction";import set from"lodash/set";import _typeof from"babel-runtime/helpers/typeof";import _Array$from from"babel-runtime/core-js/array/from";import _Object$assign from"babel-runtime/core-js/object/assign";function _broadcast(e,t,n){this.$children.forEach(function(o){(o.$options.componentName||o.$options.name)===e?o.$emit.apply(o,[t].concat(n)):_broadcast.apply(o,[e,t].concat([n]))})}var Emitter={methods:{dispatch:function(e,t,n){e=e.replace(/^El(Form(|Item))$/,"Cb$1");for(var o=this.$parent||this.$root,r=o.$options.componentName||o.$options.name;o&&(!r||r!==e);)(o=o.$parent)&&(r=o.$options.componentName||o.$options.name);o&&o.$emit.apply(o,[t].concat(n))},broadcast:function(e,t,n){_broadcast.call(this,e,t,n)}}},RE_NARGS=/(%|)\{([0-9a-zA-Z_]+)\}/g,Format=function(){return function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return 1===n.length&&"object"===_typeof(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),e.replace(RE_NARGS,function(t,o,r,a){var i,s,l=void 0;return"{"===e[a-1]&&"}"===e[a+t.length]?r:(i=n,s=r,null===(l=Object.prototype.hasOwnProperty.call(i,s)?n[r]:null)||void 0===l?"":l)})}},format=Format(),lang={WORD:{OK:"确认",CANCEL:"取消",COMFIRM:"确认",BACK:"返回",NO_SELECT:"请选择",NO_MATCH:"无匹配数据",LOADING:"加载中"},i:{locale:"zh-CN",datepicker:{selectDate:"选择日期",selectTime:"选择时间",startTime:"开始时间",endTime:"结束时间",clear:"清空",ok:"确定",datePanelLabel:"[yyyy年] [m月]",month:"月",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",year:"年",weekStartDay:"0",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{m1:"1月",m2:"2月",m3:"3月",m4:"4月",m5:"5月",m6:"6月",m7:"7月",m8:"8月",m9:"9月",m10:"10月",m11:"11月",m12:"12月"}}}},merged=!1,i18nHandler=function(){var e=this.$i18n;return e?(merged||(merged=!0,e.mergeLocaleMessage(e.locale,lang)),e.t.apply(e,arguments)):""},t=function(e,t){var n=i18nHandler.apply(this,arguments);if(null!==n&&void 0!==n)return n;for(var o=e.split("."),r=lang,a=0,i=o.length;a<i;a++){if(n=r[o[a]],a===i-1)return format(n,t);if(!n)return"";r=n}return""},use=function(e){lang=e||lang},i18n=function(e){i18nHandler=e||i18nHandler},locale={use:use,t:t,i18n:i18n},Locale={methods:{t:function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.apply(this,n)}}},trim=function(e){return(e||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};function oneOf(e,t){for(var n=0;n<t.length;n++)if(e===t[n])return!0;return!1}function camelcaseToHyphen(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var cached=void 0;function getScrollBarSize(e){if(e||void 0===cached){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),o=n.style;o.position="absolute",o.top=0,o.left=0,o.pointerEvents="none",o.visibility="hidden",o.width="200px",o.height="150px",o.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var r=t.offsetWidth;n.style.overflow="scroll";var a=t.offsetWidth;r===a&&(a=n.clientWidth),document.body.removeChild(n),cached=r-a}return cached}var MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||!1,SPECIAL_CHARS_REGEXP=/([:-_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/;function camelCase(e){return e.replace(SPECIAL_CHARS_REGEXP,function(e,t,n,o){return o?n.toUpperCase():n}).replace(MOZ_HACK_REGEXP,"Moz$1")}function getStyle(e,t){if(!e||!t)return null;"float"===(t=camelCase(t))&&(t="cssFloat");try{var n=document.defaultView.getComputedStyle(e,"");return e.style[t]||n?n[t]:null}catch(n){return e.style[t]}}function firstUpperCase(e){return e.toString()[0].toUpperCase()+e.toString().slice(1)}function warnProp(e,t,n,o){n=firstUpperCase(n),o=firstUpperCase(o),console.error("[iView warn]: Invalid prop: type check failed for prop "+t+". Expected "+n+", got "+o+". (found in component: "+e+")")}function typeOf(e){return{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regExp","[object Undefined]":"undefined","[object Null]":"null","[object Object]":"object"}[Object.prototype.toString.call(e)]}function deepCopy(e){var t=typeOf(e),n=void 0;if("array"===t)n=[];else{if("object"!==t)return e;n={}}if("array"===t)for(var o=0;o<e.length;o++)n.push(deepCopy(e[o]));else if("object"===t)for(var r in e)n[r]=deepCopy(e[r]);return n}function scrollTop(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)});var r=Math.abs(t-n);!function t(n,o,r){if(n!==o){var a=n+r>o?o:n+r;n>o&&(a=n-r<o?o:n-r),e===window?window.scrollTo(a,a):e.scrollTop=a,window.requestAnimationFrame(function(){return t(a,o,r)})}}(t,n,Math.ceil(r/o*50))}function findComponentUpward(e,t,n){n="string"==typeof t?[t]:t;for(var o=e.$parent,r=o.$options.name;o&&(!r||n.indexOf(r)<0);)(o=o.$parent)&&(r=o.$options.name);return o}function findComponentDownward(e,t){var n=e.$children,o=null;if(n.length){n.forEach(function(e){e.$options.name===t&&(o=e)});for(var r=0;r<n.length;r++){var a=n[r];if(a.$options.name===t){o=a;break}if(o=findComponentDownward(a,t))break}}return o}function findComponentsDownward(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=e.$children;return o.length&&o.forEach(function(e){var o=e.$options.name,r=e.$children;if(o===t&&n.push(e),r.length){var a=findComponentsDownward(e,t,n);a&&n.concat(a)}}),n}function hasClass(e,t){if(!e||!t)return!1;if(-1!==t.indexOf(" "))throw new Error("className should not contain space.");return e.classList?e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function addClass(e,t){if(e){for(var n=e.className,o=(t||"").split(" "),r=0,a=o.length;r<a;r++){var i=o[r];i&&(e.classList?e.classList.add(i):hasClass(e,i)||(n+=" "+i))}e.classList||(e.className=n)}}function removeClass(e,t){if(e&&t){for(var n=t.split(" "),o=" "+e.className+" ",r=0,a=n.length;r<a;r++){var i=n[r];i&&(e.classList?e.classList.remove(i):hasClass(e,i)&&(o=o.replace(" "+i+" "," ")))}e.classList||(e.className=trim(o))}}function findBrothersComponents(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e.$parent.$children.filter(function(e){return e.$options.name===t}),r=o.findIndex(function(t){return t._uid===e._uid});return n&&o.splice(r,1),o}function findComponentsUpward(e,t){var n=[],o=e.$parent;return o?(o.$options.name===t&&n.push(o),n.concat(findComponentsUpward(o,t))):[]}var index$1=Object.freeze({oneOf:oneOf,camelcaseToHyphen:camelcaseToHyphen,getScrollBarSize:getScrollBarSize,MutationObserver:MutationObserver,getStyle:getStyle,firstUpperCase:firstUpperCase,warnProp:warnProp,deepCopy:deepCopy,scrollTop:scrollTop,findComponentUpward:findComponentUpward,findComponentDownward:findComponentDownward,findComponentsDownward:findComponentsDownward,hasClass:hasClass,addClass:addClass,removeClass:removeClass,findBrothersComponents:findBrothersComponents,findComponentsUpward:findComponentsUpward}),ScrollbarMixins={methods:{checkScrollBar:function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.bodyIsOverflowing&&(this.scrollBarWidth=getScrollBarSize())},checkMaskInVisible:function(){var e=document.getElementsByClassName("ivu-modal-mask")||[];return _Array$from(e).every(function(e){return"none"===e.style.display||e.classList.contains("fade-leave-to")})},setScrollBar:function(){this.bodyIsOverflowing&&void 0!==this.scrollBarWidth&&(document.body.style.paddingRight=this.scrollBarWidth+"px")},resetScrollBar:function(){document.body.style.paddingRight=""},addScrollEffect:function(){this.checkScrollBar(),this.setScrollBar(),document.body.style.overflow="hidden"},removeScrollEffect:function(){this.checkMaskInVisible()&&(document.body.style.overflow="",this.resetScrollBar())}}},index={Emitter:Emitter,Locale:Locale,ScrollbarMixins:ScrollbarMixins};function getTarget(e){return void 0===e&&(e=document.body),!0===e?document.body:e instanceof window.Node?e:document.querySelector(e)}var directive={inserted:function(e,t,n){var o=t.value;if(e.dataset&&"true"!==e.dataset.transfer)return!1;e.className=e.className?e.className+" v-transfer-dom":"v-transfer-dom";var r=e.parentNode;if(r){var a=document.createComment(""),i=!1;!1!==o&&(r.replaceChild(a,e),getTarget(o).appendChild(e),i=!0),e.__transferDomData||(e.__transferDomData={parentNode:r,home:a,target:getTarget(o),hasMovedOut:i})}},componentUpdated:function(e,t){var n=t.value;if(e.dataset&&"true"!==e.dataset.transfer)return!1;var o=e.__transferDomData;if(o){var r=o.parentNode,a=o.home,i=o.hasMovedOut;!i&&n?(r.replaceChild(a,e),getTarget(n).appendChild(e),e.__transferDomData=_Object$assign({},e.__transferDomData,{hasMovedOut:!0,target:getTarget(n)})):i&&!1===n?(r.replaceChild(e,a),e.__transferDomData=_Object$assign({},e.__transferDomData,{hasMovedOut:!1,target:getTarget(n)})):n&&getTarget(n).appendChild(e)}},unbind:function(e){if(e.dataset&&"true"!==e.dataset.transfer)return!1;e.className=e.className.replace("v-transfer-dom",""),e.__transferDomData&&(!0===e.__transferDomData.hasMovedOut&&e.__transferDomData.parentNode&&e.__transferDomData.parentNode.appendChild(e),e.__transferDomData=null)}},index$2={TransferDom:directive},install=function e(t,n){if(!e.installed){t.i18n&&locale.i18n(function(e,n){var o=t.i18n.t(e,n);return null!==o&&void 0!==o?o:""});var o={langs:n.langs,components:{}};n.components.forEach(function(e){isArray(e)||(e=[e]);var n=e[1]||{};e=(e=e[0])&&e.hasOwnProperty("default")?e.default:e,!n.implicit&&isFunction(e.install)&&(n.isCb?t.use(e,n):t.component("cb-"+n.id,e)),n.id&&(o.components[n.id]=n)}),set(t,"ufp.plugins.ui.opts",o)}},main={install:install};export{index as mixins,index$1 as utils,index$2 as directives};export default main;